

<HEAD>

<SCRIPT LANGUAGE="JavaScript">

<!--

// Copyright (c) 1996-1997 Tomer Shiran. All rights reserved.
// Permission given to use the script provided that this notice remains as is.
// Additional scripts can be found at http://www.geocities.com/~yehuda/

// Boolean variable specified if alert should be displayed if cookie exceeds 4KB
var caution = false

// name - name of the cookie
// value - value of the cookie
// [expires] - expiration date of the cookie (defaults to end of current session)
// [path] - path for which the cookie is valid (defaults to path of calling document)
// [domain] - domain for which the cookie is valid (defaults to domain of calling document)
// [secure] - Boolean value indicating if the cookie transmission requires a secure transmission
// * an argument defaults when it is assigned null as a placeholder
// * a null placeholder is not required for trailing omitted arguments
function setCookie(name, value, expires, path, domain, secure) {
        var curCookie = name + "=" + escape(value) +
                ((expires) ? "; expires=" + expires.toGMTString() : "") +
                ((path) ? "; path=" + path : "") +
                ((domain) ? "; domain=" + domain : "") +
                ((secure) ? "; secure" : "")
        if (!caution || (name + "=" + escape(value)).length <= 4000)
                document.cookie = curCookie
        else
                if (confirm("Cookie exceeds 4KB and will be cut!"))
                        document.cookie = curCookie
}

// name - name of the desired cookie
// * return string containing value of specified cookie or null if cookie does not exist
function getCookie(name) {
        var prefix = name + "="
        var cookieStartIndex = document.cookie.indexOf(prefix)
        if (cookieStartIndex == -1)
                return null
        var cookieEndIndex = document.cookie.indexOf(";", cookieStartIndex + prefix.length)
        if (cookieEndIndex == -1)
                cookieEndIndex = document.cookie.length
        return unescape(document.cookie.substring(cookieStartIndex + prefix.length, cookieEndIndex))
}

// name - name of the cookie
// [path] - path of the cookie (must be same as path used to create cookie)
// [domain] - domain of the cookie (must be same as domain used to create cookie)
// * path and domain default if assigned null or omitted if no explicit argument proceeds
function deleteCookie(name, path, domain) {
        if (getCookie(name)) {
                document.cookie = name + "=" + 
                ((path) ? "; path=" + path : "") +
                ((domain) ? "; domain=" + domain : "") +
                "; expires=Thu, 01-Jan-70 00:00:01 GMT"
        }
}

// date - any instance of the Date object
// * you should hand all instances of the Date object to this function for "repairs"
// * this function is taken from Chapter 14, "Time and Date in JavaScript", in "Learn Advanced JavaScript Programming"
function fixDate(date) {
        var base = new Date(0)
        var skew = base.getTime()
        if (skew > 0)
                date.setTime(date.getTime() - skew)
}

// constructor function to create an entry (parent or child)
function item(parent, text, depth) {
        this.parent = parent // is this item a parent?
        this.text = text // text for link (may include HTML)
        this.depth = depth // nested depth
}

// constructor function to create array (compatible with all browsers)
function makeArray(length) {
        this.length = length // length of array (integer)
}

// create items of outline
function makeDatabase() {
  outline = new makeArray(37) // create global object

    // create items in outline
    outline[0]  = new item(true,  'About ntop', 0)
    outline[1]  = new item(false, '<A HREF=home.html target=area>What is ntop?</A>', 1)
    outline[2]  = new item(false, '<A HREF=Credits.html target=area>Credits</A>', 1)
    outline[3]  = new item(false, '<A HREF=ntop.html target=area>Man Page</A>', 1)
    outline[4]  = new item(true,  'Data Rcvd', 0)
    outline[5]  = new item(false, '<A HREF=sortDataReceivedProtos.html target=area>All Protocols</A>', 1)
    outline[6]  = new item(false, '<A HREF=sortDataReceivedIP.html target=area>IP</A>', 1)
    outline[7]  = new item(false, '<A HREF=sortDataReceivedThpt.html target=area>Throughput</A>', 1)
    outline[8]  = new item(false, '<A HREF=NetFlows.html target=area>NetFlows</A>', 1)
    outline[9]  = new item(true,  'Data Sent', 0)
    outline[10]  = new item(false, '<A HREF=sortDataSentProtos.html target=area>All Protocols</A>', 1)
    outline[11]  = new item(false, '<A HREF=sortDataSentIP.html target=area>IP</A>', 1)
    outline[12] = new item(false, '<A HREF=sortDataSentThpt.html target=area>Throughput</A>', 1)
    outline[13] = new item(true,  'Stats', 0)
    outline[14] = new item(false, '<A HREF=multicastStats.html target=area>Multicast</A>', 1)
    outline[15] = new item(false, '<A HREF=trafficStats.html target=area>Traffic</A>', 1)
    outline[16] = new item(false, '<A HREF=hostsInfo.html target=area>Hosts</A>', 1)
    outline[17] = new item(false, '<A HREF=thptStats.html target=area>Throughput</A>', 1)
    outline[18] = new item(false, '<A HREF=domainTrafficStats.html target=area>Domain</A>', 1)
    outline[19] = new item(false, '<A HREF=showPlugins.html target=area>Plugins</A>', 1)
    outline[20] = new item(true,  'IP Traffic', 0)
    outline[21] = new item(false, '<A HREF=IpR2L.html target=area>R-&gt;L</A>', 1)
    outline[22] = new item(false, '<A HREF=IpL2R.html target=area>L-&gt;R</A>', 1)
    outline[23] = new item(false, '<A HREF=IpL2L.html target=area>L&lt;-&gt;L</A>', 1)
    outline[24] = new item(false, '<A HREF=ipTrafficMatrix.html target=area>Matrix</A>', 1)
    outline[25] = new item(false, '<A HREF=lsofData.html target=area>Local Usage</A>', 1)
    outline[26] = new item(true,  'IP Protocols', 0)
    outline[27] = new item(false, '<A HREF=ipProtoDistrib.html target=area>Distribution</A>', 1)
    outline[28] = new item(false, '<A HREF=ipProtoUsage.html target=area>Usage</A>', 1)
    outline[29] = new item(false, '<A HREF=NetNetstat.html target=area>Sessions</A>', 1)
    outline[30] = new item(false, '<A HREF=localRoutersList.html target=area>Routers</A>', 1)
    outline[31] = new item(true,  'Admin', 0)
    outline[32] = new item(false, '<A HREF=switch.html target=area>Switch NIC</A>', 1)
    outline[33] = new item(false, '<A HREF=resetStats.html target=area onClick="return confirmReset()">Reset Stats</A>', 1)
    outline[34] = new item(false, '<A HREF=shutdown.html target=area onClick="return confirmShutdown()">Shutdown</A>', 1)
    outline[35] = new item(false, '<A HREF=showUsers.html target=area>Users</A>', 1)
    outline[36] = new item(false, '<A HREF=showURLs.html target=area>URLs</A>', 1)
        
    // determine current state of each item and assign to state properties
    setStates()

    // set image for each item (only items with true state)
    setImages()
    }

function setStates() {
        // assign current cookie to local variable
        var storedValue = getCookie("outline")
        
        // if desired cookie not found (null)
        if (!storedValue) {
                // set states to default if no cookie found
                for (var i = 0; i < outline.length; ++i) {
                        // only topmost level is visible by default
                        if (outline[i].depth == 0)
                                outline[i].state = true
                        else
                                outline[i].state = false
                }
        } else {
                // extract current states from cookie (0 => false, 1 => true)
                for (var i = 0; i < outline.length; ++i) {
                        if (storedValue.charAt(i) == '1')
                                outline[i].state = true
                        else
                                outline[i].state = false
                }
        }
}

function setImages() {
        // loop through all elements of the outline "array" (object)
        for (var i = 0; i < outline.length; ++i) {
                if (outline[i].state)
                        if (outline[i].parent) // outline[i] is a parent
                                if (outline[i + 1].state) // outline[i] is exploded
                                        outline[i].pic = '<A HREF="javascript:toggle(' + i + ')"><IMG SRC="expanded.gif" BORDER=0></A>'
                                else // outline[i] is collapsed
                                        outline[i].pic = '<A HREF="javascript:toggle(' + i + ')"><IMG SRC="collapsed.gif" BORDER=0></A>'
                        else // outline[i] is only a child (not a parent)
                                outline[i].pic = '<IMG SRC="child.gif" BORDER=0>'
        }
}

// change from expanded to collapsed and vice versa
function toggle(num) {
        // loop starts at item following argument
        // terminate loop when:
        //   a) last element of outline "array" reached
        //   b) current item (outline[i]) is not deeper than toggled item (outline[num])
        for (var i = num + 1; i < outline.length && outline[i].depth >= outline[num].depth + 1; ++i) {
                // if current item (outline[i]) is a direct child of outline[num]
                if (outline[i].depth == outline[num].depth + 1)
                        outline[i].state = !outline[i].state // toggle state
        }

        // store new states in cookie
        setStorage()

        // reload page
        history.go(0)
}

function setStorage() {
        // initialize local variable to empty string
        var text = ""

        // loop through all properties of outline "array"
        for (var i = 0; i < outline.length; ++i) {
                // use "1" character to represent true state, and "0" for false state
                text += (outline[i].state) ? "1" : "0"
        }

        // create cookie named "outline" with "binary" string
        setCookie("outline", text)
}

function confirmReset() {
        return confirm("Are you sure you want to reset all statistics ?");
      }

function confirmShutdown() {
        return confirm("Are you sure you want to shutdown ntop ?");
      }

// update database
makeDatabase()

// -->

</SCRIPT>

</HEAD>

<BODY BGCOLOR=#FFFFFF BACKGROUND=bg_line.gif>
<pre> </pre>
<CENTER><FONT FACE=Helvetica SIZE=+2>Welcome<br>to<br>ntop!</FONT>
<br>
<IMG SRC=ntop.gif>
</CENTER>

<SCRIPT LANGUAGE="JavaScript">
<!--

// use <PRE> to enable indentation via spaces
document.write('<PRE><FONT FACE=Helvetica SIZE=-1><H4>')

// loop through elements of outline "array"
for (var i = 0; i < outline.length; ++i) {
	// if current item's state is true
	if (outline[i].state) {
		// place three spaces for each nesting (depth * 3 spaces)
		for (var j = 0; j < outline[i].depth * 3; ++j) {
			document.write(' ')
		}

		// follow indentation with picture, another space, text, and new line
		document.write(outline[i].pic, ' ', outline[i].text, '<BR>')
	} else {
		// current item's state is false (skip all its children)
		var previous = i
		for (var k = i + 1; k < outline.length && outline[k].depth >= outline[previous].depth; ++k) {
			++i
		}
	}
}

// end <PRE> to return to normal formatting
document.write('</FONT></H4></PRE>')

// -->
</SCRIPT>
<center>
<FONT FACE=Helvetica>
<font size=-1>
[<A HREF=leftmenu-nojs.html>No JavaScript</A>]
</font>
<p>
&copy; 1998-2000<br>by<br>
<b><A HREF="http://jake.unipi.it/~deri/" target=area>Luca Deri</A></FONT>
</center>


</BODY>

